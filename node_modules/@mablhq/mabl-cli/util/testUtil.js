"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getForbiddenApiError = exports.assertThrowsForbiddenError = void 0;
const ApiError_1 = require("../api/ApiError");
async function assertThrowsForbiddenError(func, missingPermissionMessage) {
    let thrownError;
    try {
        await func;
    }
    catch (error) {
        thrownError = error;
    }
    assertForbiddenError(thrownError, missingPermissionMessage);
}
exports.assertThrowsForbiddenError = assertThrowsForbiddenError;
function assertForbiddenError(error, expectedMessage) {
    expect(error instanceof ApiError_1.ApiError).toBeTruthy();
    expect(error.statusCode).toBe(403);
    expect(error === null || error === void 0 ? void 0 : error.message).toBe(expectedMessage);
}
function getForbiddenApiError(message) {
    return new ApiError_1.ApiError(message, 403);
}
exports.getForbiddenApiError = getForbiddenApiError;
